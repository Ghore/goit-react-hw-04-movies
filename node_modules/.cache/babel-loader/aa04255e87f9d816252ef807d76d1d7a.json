{"ast":null,"code":"import _classCallCheck from\"D:\\\\GO\\\\goit-react-hw-04-movies\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\GO\\\\goit-react-hw-04-movies\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\GO\\\\goit-react-hw-04-movies\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\GO\\\\goit-react-hw-04-movies\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import*as MovieApi from\"../services/MovieApi\";import{Link}from\"react-router-dom\";import queryString from\"query-string\";var MoviesPage=/*#__PURE__*/function(_Component){_inherits(MoviesPage,_Component);var _super=_createSuper(MoviesPage);function MoviesPage(){var _this;_classCallCheck(this,MoviesPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={query:\"\",films:[]};_this.handleChange=function(e){_this.setState({query:e.target.value});};_this.handleSubmit=function(e){e.preventDefault();_this.getForQuery(_this.state.query);_this.props.history.push({pathname:_this.props.location.pathname,search:\"query=\".concat(_this.state.query)});};_this.getForQuery=function(query){MovieApi.getForQuery(query).then(function(data){return _this.setState({films:data.data.results,query:query});});};return _this;}_createClass(MoviesPage,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.location.search){var locationQuery=queryString.parse(this.props.location.search).query;this.getForQuery(locationQuery);}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"input\",{value:this.query,onChange:this.handleChange,type:\"text\",placeholder:\"Search movie\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",null,this.state.films.length>0&&this.state.films.map(function(film){return film.title!==\"Undefined\"&&/*#__PURE__*/React.createElement(\"li\",{key:film.id},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/movies/\".concat(film.id),state:{from:_this2.props.location.pathname,query:_this2.state.query}}},film.title));})));}}]);return MoviesPage;}(Component);export{MoviesPage as default};","map":{"version":3,"sources":["D:/GO/goit-react-hw-04-movies/src/pages/MoviesPage.js"],"names":["React","Component","MovieApi","Link","queryString","MoviesPage","state","query","films","handleChange","e","setState","target","value","handleSubmit","preventDefault","getForQuery","props","history","push","pathname","location","search","then","data","results","locationQuery","parse","length","map","film","title","id","from"],"mappings":"4lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,sBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,C,GAEqBC,CAAAA,U,2UACnBC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,KAAK,CAAE,EAFD,C,OAYRC,Y,CAAe,SAACC,CAAD,CAAO,CACpB,MAAKC,QAAL,CAAc,CAAEJ,KAAK,CAAEG,CAAC,CAACE,MAAF,CAASC,KAAlB,CAAd,EACD,C,OAEDC,Y,CAAe,SAACJ,CAAD,CAAO,CACpBA,CAAC,CAACK,cAAF,GACA,MAAKC,WAAL,CAAiB,MAAKV,KAAL,CAAWC,KAA5B,EACA,MAAKU,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,CACtBC,QAAQ,CAAE,MAAKH,KAAL,CAAWI,QAAX,CAAoBD,QADR,CAEtBE,MAAM,iBAAW,MAAKhB,KAAL,CAAWC,KAAtB,CAFgB,CAAxB,EAID,C,OAEDS,W,CAAc,SAACT,KAAD,CAAW,CACvBL,QAAQ,CAACc,WAAT,CAAqBT,KAArB,EAA4BgB,IAA5B,CAAiC,SAACC,IAAD,QAC/B,OAAKb,QAAL,CAAc,CACZH,KAAK,CAAEgB,IAAI,CAACA,IAAL,CAAUC,OADL,CAEZlB,KAAK,CAALA,KAFY,CAAd,CAD+B,EAAjC,EAMD,C,mGA3BmB,CAClB,GAAI,KAAKU,KAAL,CAAWI,QAAX,CAAoBC,MAAxB,CAAgC,CAC9B,GAAMI,CAAAA,aAAa,CAAGtB,WAAW,CAACuB,KAAZ,CAAkB,KAAKV,KAAL,CAAWI,QAAX,CAAoBC,MAAtC,EAA8Cf,KAApE,CACA,KAAKS,WAAL,CAAiBU,aAAjB,EACD,CACF,C,uCAwBQ,iBACP,mBACE,qDAEE,4BAAM,QAAQ,CAAE,KAAKZ,YAArB,eACE,6BACE,KAAK,CAAE,KAAKP,KADd,CAEE,QAAQ,CAAE,KAAKE,YAFjB,CAGE,IAAI,CAAC,MAHP,CAIE,WAAW,CAAC,cAJd,EADF,cAOE,8BAAQ,IAAI,CAAC,QAAb,WAPF,CAFF,cAcE,8BACG,KAAKH,KAAL,CAAWE,KAAX,CAAiBoB,MAAjB,CAA0B,CAA1B,EACC,KAAKtB,KAAL,CAAWE,KAAX,CAAiBqB,GAAjB,CACE,SAACC,IAAD,QACEA,CAAAA,IAAI,CAACC,KAAL,GAAe,WAAf,eACE,0BAAI,GAAG,CAAED,IAAI,CAACE,EAAd,eACE,oBAAC,IAAD,EACE,EAAE,CAAE,CACFZ,QAAQ,mBAAaU,IAAI,CAACE,EAAlB,CADN,CAEF1B,KAAK,CAAE,CACL2B,IAAI,CAAE,MAAI,CAAChB,KAAL,CAAWI,QAAX,CAAoBD,QADrB,CAELb,KAAK,CAAE,MAAI,CAACD,KAAL,CAAWC,KAFb,CAFL,CADN,EASGuB,IAAI,CAACC,KATR,CADF,CAFJ,EADF,CAFJ,CAdF,CADF,CAsCD,C,wBA1EqC9B,S,SAAnBI,U","sourcesContent":["import React, { Component } from \"react\";\r\nimport * as MovieApi from \"../services/MovieApi\";\r\nimport { Link } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\n\r\nexport default class MoviesPage extends Component {\r\n  state = {\r\n    query: \"\",\r\n    films: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.location.search) {\r\n      const locationQuery = queryString.parse(this.props.location.search).query;\r\n      this.getForQuery(locationQuery);\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.getForQuery(this.state.query);\r\n    this.props.history.push({\r\n      pathname: this.props.location.pathname,\r\n      search: `query=${this.state.query}`,\r\n    });\r\n  };\r\n\r\n  getForQuery = (query) => {\r\n    MovieApi.getForQuery(query).then((data) =>\r\n      this.setState({\r\n        films: data.data.results,\r\n        query,\r\n      })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      \r\n        <form onSubmit={this.handleSubmit}>\r\n          <input\r\n            value={this.query}\r\n            onChange={this.handleChange}\r\n            type=\"text\"\r\n            placeholder=\"Search movie\"\r\n          />\r\n          <button type=\"submit\">\r\n            Search\r\n          </button>\r\n        </form>\r\n\r\n        <ul>\r\n          {this.state.films.length > 0 &&\r\n            this.state.films.map(\r\n              (film) =>\r\n                film.title !== \"Undefined\" && (\r\n                  <li key={film.id}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: `/movies/${film.id}`,\r\n                        state: {\r\n                          from: this.props.location.pathname,\r\n                          query: this.state.query,\r\n                        },\r\n                      }}\r\n                    >\r\n                      {film.title}\r\n                    </Link>\r\n                  </li>\r\n                )\r\n            )}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}